<!DOCTYPE html>
<html lang="en">

<!-- begin::Head -->
<head>
  <base href="">
  <meta charset="utf-8" />
  <title>İltechSoft | Dashboard</title>
  <meta name="description" content="Updates and statistics">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!--begin::Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700|Roboto:300,400,500,600,700">
  <!--end::Fonts -->

  <!--begin::Page Custom Styles(used by this page) -->
  <link href="/src/assets/css/pages/login/login-6.css" rel="stylesheet" type="text/css" />
  <link href="/src/assets/css/pages/pricing/pricing-3.css" rel="stylesheet" type="text/css" />
  <link href="/src/assets/css/pages/wizard/wizard-3.css" rel="stylesheet" type="text/css" />
  <!--end::Page Custom Styles -->

  <!--begin::Page Vendors Styles(used by this page) -->
  <link href="/src/assets/plugins/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css" />
  <!--end::Page Vendors Styles -->

  <!--begin::Global Theme Styles(used by all pages) -->
  <link href="/src/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
  <link href="/src/assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
  <!--end::Global Theme Styles -->

  <!--begin::Layout Skins(used by all pages) -->
  <link href="/src/assets/css/skins/header/base/light.css" rel="stylesheet" type="text/css" />
  <link href="/src/assets/css/skins/header/menu/light.css" rel="stylesheet" type="text/css" />
  <link href="/src/assets/css/skins/brand/dark.css" rel="stylesheet" type="text/css" />
  <link href="/src/assets/css/skins/aside/dark.css" rel="stylesheet" type="text/css" />
  <link href="/src/assets/css/custom/style.min.css" rel="stylesheet" type="text/css" />
  <!--end::Layout Skins -->
  <link rel="shortcut icon" href="/src/assets/images/settings/favicon.ico" />

  <!-- Custom Config File -->
  <script src="/src/assets/js/custom/countries_of_world.js" type="text/javascript"></script>
  <script src="/src/assets/js/custom/cities_of_turkey.js" type="text/javascript"></script>
  <script src="/src/assets/js/custom/configBase.js" type="text/javascript"></script>
  <script src="/src/assets/js/custom/Utils.js" type="text/javascript"></script>
  <link href="/src/assets/css/custom/general.css" rel="stylesheet" type="text/css" />


  <link href="https://cdnjs.cloudflare.com/ajax/libs/tabulator/4.1.1/css/tabulator.min.css" rel="stylesheet">
 <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/tabulator/4.1.1/css/tabulator_bootstrap4.min.css" rel="stylesheet">-->

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tabulator/4.1.1/js/tabulator.min.js"></script>
  <script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.5/jspdf.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.3.2/jspdf.plugin.autotable.js"></script>

</head>

<!-- end::Head -->

<!-- begin::Body -->
<body>
  <div data-v-9c90884e="">
    <div data-v-9c90884e="" id="kt_subheader" class="kt-subheader kt-grid__item">
      <div data-v-9c90884e="" class="kt-container  kt-container--fluid ">
        <div data-v-9c90884e="" class="kt-subheader__main">
          <h3 data-v-9c90884e="" class="kt-subheader__title">Paraşüt Müşteri Listesi</h3></div>
        <div data-v-9c90884e="" class="kt-subheader__toolbar"><a data-v-9c90884e="" href="parasutfatura.html" class="btn btn-label-brand btn-bold">
Fatura Kes
</a></div>
      </div>
    </div>
    <div data-v-9c90884e="" class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
      <div data-v-9c90884e="">
        <div data-v-9c90884e="" class="row product-list-loading">
          <div data-v-9c90884e="" class="col-xl-12">
            <div data-v-9c90884e="" style="padding:10px" class="kt-portlet">


              <br/>

              <div>
                <button  class="btn btn-label-brand btn-bold" id="download-xlsx">Download XLSX</button>
                <button  class="btn btn-label-brand btn-bold" id="download-pdf">Download PDF</button>
               </div>
            <br/>
              <div id="example-table" class="table-dark"></div>

              <style>
                body {font-family: Arial, Helvetica, sans-serif;}

                /* The Modal (background) */
                .modal {
                  display: none; /* Hidden by default */
                  position: fixed; /* Stay in place */
                  /*z-index: 1;  Sit on top */
                  padding-top: 100px; /* Location of the box */
                  left: 0;
                  top: 1000;
                  width: 100%; /* Full width */
                  height: 100%; /* Full height */
                  overflow: auto; /* Enable scroll if needed */
                  background-color: rgb(0,0,0); /* Fallback color */
                  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
                }

                /* Modal Content */
                .modal-content {
                  background-color: #fefefe;
                  margin: auto;
                  padding: 20px;
                  border: 1px solid #888;
                  width: 40%;
                }

                /* The Close Button */
                .close {
                  color: #aaaaaa;
                  float: right;
                  font-size: 28px;
                  font-weight: bold;
                  align-self: flex-end;
                }

                .close:hover,
                .close:focus {
                  color: #000;
                  text-decoration: none;
                  cursor: pointer;
                }

                .tabulator-header-filter {

                 border-radius:4px;

                }

                .tabulator-headers, .tabulator-header {

                -color:white;
                -background-color: black;
                }

                </style>

              <!-- The Modal -->
            <div id="myModal" class="modal">

          <!-- Modal content -->
                 <div class="modal-content">
                <span class="close">&times;</span>


                <form  method="post" id="setproduct" action="http://localhost:8080/ws_iltech_n11/ws/setproductbasic">



                  <div class="col-md-12">
                    <input type="hidden" value="71faab12-d47e-432e-a4a2-5546c49cb1c4" name="appKey" class="form-control input-md">
                  </div>

                  <div class="col-md-12">
                    <input type="hidden" value="FrOoxTV9Mk4R5KI5" name="appSecret" class="form-control input-md">
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for=""> Ürün ID:</label>
                  <div class="col-md-12">
                    <input value="" id="productId" name="productId" class="form-control input-md" disabled>
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for=""> Başlık:</label>
                  <div class="col-md-12">
                    <input value="" id="title" name="title" class="form-control input-md">
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for=""> Altbaşlık:</label>
                  <div class="col-md-12">
                    <input value="" id="subtitle" name="subtitle" class="form-control input-md">
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for=""> Ürün Satış Kodu:</label>
                  <div class="col-md-12">
                    <input value="" id="productSellerCode" name="productSellerCode" class="form-control input-md" disabled>
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for=""> Fiyat:</label>
                  <div class="col-md-12">
                    <input value="" id="price" name="price" class="form-control input-md">
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for=""> Stok ID:</label>
                  <div class="col-md-12">
                    <input value="" id="stockItem_Id" name="stockItem_Id" class="form-control input-md" disabled>
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for="">*Stok Adet:</label>
                  <div class="col-md-12">
                    <input value="" id="quantity" name="quantity" class="form-control input-md">
                  </div>

                  <label class="col-md-4 control-label lblgeneral" for="">*İndirim Tipi:</label>
                  <div class="col-md-12">
                    <select name="discount_type" id="discount_type" class="form-control input-md">
                      <option value="1" selected>İndirim Tutarı</option>
                      <option value="2">İndirim Oranı(%)</option>
                      <option value="3">İndirimli Fiyat</option>
                    </select>
                  </div>

                  <label class="col-md-5 control-label lblgeneral" for="">*İndirim Miktarı:</label>
                  <div class="col-md-12">
                    <input value="" id="discount_value" name="discount_value" class="form-control input-md">
                  </div>

                  <input type="hidden" value="https://n11scdn.akamaized.net/a1/178/elektronik/masaustu-bilgisayar/zeiron-intel-i5-346ghz-8gb-120gb-500gb-185-masaustu-pc__0142104110506610.jpg" id="image_url1" name="image_url1" class="form-control input-md">
                  <input type="hidden" value="1" id="image_order1" name="image_order1" class="form-control input-md">


                </br>
                <input type="button" class="btn btn-label-brand btn-bold" value="Güncelle" onclick="setProduct1()">

                </form>

              </br>
                <label class="col-md-4 control-label lblgeneral" style="font-size:20px" id="counter" name="counter"></label>


                  </div>

               </div>




              <div data-v-9c90884e="" class="kt-portlet__body"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div data-v-9c90884e="" id="platformProductEditModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" class="modal fade">
      <div data-v-9c90884e="" role="document" class="modal-dialog modal-xl">
        <div data-v-9c90884e="" class="modal-content">

          <div data-v-9c90884e="" class="row">
            <div data-v-9c90884e="" class="col-12 modal-loading text-center mt-5 mb-5 pt-5 pb-5">&nbsp;</div>
          </div>
          <!---->
          <!---->
          <!---->
        </div>
      </div>
    </div>
  </div>
  <!-- begin::Global Config(global config for global JS sciprts) -->
  <script>
    var KTAppOptions = {
      "colors": {
        "state": {
          "brand": "#5d78ff",
          "dark": "#282a3c",
          "light": "#ffffff",
          "primary": "#5867dd",
          "success": "#34bfa3",
          "info": "#36a3f7",
          "warning": "#ffb822",
          "danger": "#fd3995"
        },
        "base": {
          "label": [
            "#c5cbe3",
            "#a1a8c3",
            "#3d4465",
            "#3e4466"
          ],
          "shape": [
            "#f0f3ff",
            "#d9dffa",
            "#afb4d4",
            "#646c9a"
          ]
        }
      }
    };
  </script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.js"></script>

  <!-- end::Global Config -->

  <script type="text/javascript">
    function loadFile(filename, filetype) {
      filename = filename + "?time=" + Date.now();
      if (filetype == "js") { //if filename is a external JavaScript file
        var fileref = document.createElement('script');
        fileref.setAttribute("type", "text/javascript");
        fileref.setAttribute("src", filename);
      } else if (filetype == "css") { //if filename is an external CSS file
        var fileref = document.createElement("link")
        fileref.setAttribute("rel", "stylesheet")
        fileref.setAttribute("type", "text/css")
        fileref.setAttribute("href", filename)
      }
      if (typeof fileref != "undefined")
        document.getElementsByTagName("head")[0].appendChild(fileref);
    }

var deleteIcon = function(value, data, cell, row, options){ //plain text value
    return "<i class='fa fa-eye'></i>"
};

//tabulator script
var table = new Tabulator("#example-table", {

  rowDblClick:function(e, row){
    //e - the click event object
    //row - row component
    //window.alert(row.getData().price);

    document.getElementById("productSellerCode").value = row.getData().productSellerCode;
    document.getElementById("price").value = row.getData().price;
    document.getElementById("title").value = row.getData().title;
    document.getElementById("subtitle").value = row.getData().subtitle;
    document.getElementById("productId").value = row.getData().productId;
    document.getElementById("quantity").value = row.getData().quantity;
    document.getElementById("stockItem_Id").value = row.getData().id;
    //document.getElementById("discount_type").value = row.getData().discount_type;
    //document.getElementById("discount_value").value = row.getData().discount_value;

    var modal = document.getElementById("myModal");
    var btn = document.getElementById("myBtn");
    var span = document.getElementsByClassName("close")[0];
 //  modal.style.display = "block";
 //   span.onclick = function() {
 //   modal.style.display = "none";
//}


    },
    resizableRows:true,
    selectable:true,
    tooltips:true,
		height:"311px",
		layout:"fitColumns",
		placeholder:"No Data Set",
		movableColumns:true,
		layout:"fitColumns",
		columns:[
      {title:"ID", field:"row_id", formatter:"rownum" ,sorter:"number", width:50,headerTooltip:true, },
      {title:"Parşüt Id", field:"id" ,sorter:"number",headerTooltip:true, },
      {title:"Adı", field:"name" ,sorter:"number",headerTooltip:true, },
      {title:"Email", field:"email", sorter:"string",tooltip:true,headerTooltip:true,headerFilter:"input",headerFilterPlaceholder:"ara"},
      {title:"Telefon", field:"phone", sorter:"string",  tooltip:true ,headerFilter:"input",headerFilterPlaceholder:"ara" },
			{title:"Bakiye", field:"balance", sorter:"string",tooltip:true,headerFilter:"input",headerFilterPlaceholder:"ara"},
      {title:"Sil" ,visible:false, sortable:false, formatter:deleteIcon,width:60,cellClick:function(e, row){

    },}
		],
	});

	document.getElementById("download-xlsx").addEventListener("click", function(){
    table.download("xlsx", "urunler_gg.xlsx", {sheetName:"Urun Listesi"});
});

	document.getElementById("download-pdf").addEventListener("click", function(){
    table.download("pdf", "urunler_gg.pdf", {
        orientation:"portrait", //set page orientation to portrait
        title:"Urun Listesi", //add title to report
    });
});


var xhr = new XMLHttpRequest();

  xhr.addEventListener("readystatechange", function()  {
    if(this.readyState === 4) {
      //console.log(this.responseText);
      var resultText = xhr.responseText;




      let tobj = JSON.parse(resultText);
      delete tobj["meta"];
      delete tobj["links"];
      delete tobj["attributes"];

     console.log(JSON.stringify(tobj).replace("{\"data\":[","").replace("}}]","}").replace(",\"meta\":{\"created_at\":\"2020-08-29T06:00:23.601Z\",\"updated_at\":\"2020-08-29T06:00:23.601Z\"}","").replace(",\"relationships\":{\"category\":{\"meta\":{}},\"price_list\":{\"meta\":{}},\"contact_portal\":{\"meta\":{}},\"contact_people\":{\"meta\":{}},\"activities\":{\"meta\":{}},\"e_invoice_inboxes\":{\"meta\":{}},\"sharings\":{\"meta\":{}}}","").replace("\"attributes\":{","").replace("}}","}"));

     // window.alert(resultText.replace("{\"product\":","").replace("}]}","}]"));
     table.setData("[" + JSON.stringify(tobj).replace("{\"data\":[","").replace("}}]","}").replace(",\"meta\":{\"created_at\":\"2020-08-29T06:00:23.601Z\",\"updated_at\":\"2020-08-29T06:00:23.601Z\"}","").replace(",\"relationships\":{\"category\":{\"meta\":{}},\"price_list\":{\"meta\":{}},\"contact_portal\":{\"meta\":{}},\"contact_people\":{\"meta\":{}},\"activities\":{\"meta\":{}},\"e_invoice_inboxes\":{\"meta\":{}},\"sharings\":{\"meta\":{}}}","").replace("\"attributes\":{","").replace("}}","}") + "]");

    }
  })


  xhr.open("GET", "https://api.parasut.com/v4/373907/contacts");
  xhr.setRequestHeader("Authorization", "Bearer 7d6054e0a47c74a68d83e6dbee14799ee86b179baad33f6c9e5a1989e6aa0d2d");
  xhr.send();


  //Set Product Price
  function setProductPrice() {

   var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance
   var theUrl = "http://localhost:8080/ws_iltech_n11/ws/setproductGGaaaaa";

   xmlhttp.addEventListener("readystatechange", function()  {
       if(this.readyState === 4) {
         console.log(this.responseText);
         var resultText = xhr.responseText;
         window.alert(this.responseText);

         if(this.responseText.includes("error")) {

           var count = 60, timer = setInterval(function() {

         $("#counter").css("visibility", "visible");
         $("#counter").html("Lütfen " +  count-- + " saniye bekleyiniz");
         if(count == 0) {
             clearInterval(timer);
          $("#counter").css("visibility", "hidden");
            }
              }, 1000);

         }

       //var abc  = this.responseText.split("<");
        // window.alert(abc[6] + "status"  +abc[10] +"mesaj eror"  +this.responseText);

       }
     })

   var setProductData = {
               "appKey":"___appKey___",
               "appSecret":"___appSecret___",
               "productId":"___productId___",
               "productSellerCode":"___productSellerCode___",
               "price":"___price___",
               "discount_type":"___discount_type___",
               "discount_value":"___discount_value___",
               "description":"",
               "stockItem_Id":"___stockItem_id___",
               "stockItem_quantity1":"___quantity__"
             //  "image_url1":"___img_url1___",
             //  "image_order1":"___img_order1___"

           }

   var postData = JSON.stringify(setProductData);

   postData = postData.replace("___appKey___","71faab12-d47e-432e-a4a2-5546c49cb1c4");
   postData = postData.replace("___appSecret___","FrOoxTV9Mk4R5KI5");
   postData = postData.replace("___productId___",document.getElementById("productId").value);
   postData = postData.replace("___productSellerCode___",document.getElementById("productSellerCode").value);
   postData = postData.replace("___price___",document.getElementById("price").value);
   postData = postData.replace("___discount_type___",document.getElementById("discount_type").value);
   postData = postData.replace("___discount_value___",document.getElementById("discount_value").value);
   //postData = postData.replace("___description___",document.getElementById("description").value);
   postData = postData.replace("___stockItem_id___",document.getElementById("stockItem_Id").value);
   postData = postData.replace("___quantity__",document.getElementById("quantity").value);
   postData = postData.replace("___img_url1___",document.getElementById("image_url1").value);
   postData = postData.replace("___img_order1___",document.getElementById("image_order1").value);

   //window.alert(postData);
   console.log(postData);


   xmlhttp.open("POST", theUrl);
   xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
   xmlhttp.send(postData);
   }


   function delProduct1(product_id) {

   var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance
   var theUrl = "http://localhost:8080/ws_iltech_n11/ws/delproductGGaa";

   xmlhttp.addEventListener("readystatechange", function()  {
       if(this.readyState === 4) {
         console.log(this.responseText);
         var resultText = xhr.responseText;
         window.alert(this.responseText);

       //var abc  = this.responseText.split("<");
        // window.alert(abc[6] + "status"  +abc[10] +"mesaj eror"  +this.responseText);

       }
     })

   var addProductData = {
               "sign":"___sign__",
               "timestamp":"___timestamp___",
               "productId":"___productId___"
   }

  var date = new Date();
  var timestamp = date.getTime();
  var md5Hash = CryptoJS.MD5("mF4bqc8r3vsWaGemkmkbqN9bgThQJTuS"+"HPMUgcUtQ2Fn6VEe"+ timestamp);

   var postData = JSON.stringify(addProductData);

   postData = postData.replace("___sign__",md5Hash);
   postData = postData.replace("___timestamp___",timestamp);
   postData = postData.replace("___productId___",product_id);

   //window.alert(postData);
   console.log(postData);


   xmlhttp.open("POST", theUrl);
   xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
   xmlhttp.send(postData);

   }




  </script>

  <!--begin::Global Theme Bundle(used by all pages) -->
  <script src="/src/assets/plugins/global/plugins.bundle.js" type="text/javascript"></script>
  <script src="/src/assets/js/scripts.bundle.js" type="text/javascript"></script>
  <!--end::Global Theme Bundle -->

  <!--begin::Page Vendors(used by this page) -->
  <script src="/src/assets/plugins/custom/fullcalendar/fullcalendar.bundle.js" type="text/javascript"></script>
  <script src="//maps.google.com/maps/api/js?key=AIzaSyBTGnKT7dt597vo9QgeQ7BFhvSRP4eiMSM" type="text/javascript"></script>
  <script src="/src/assets/plugins/custom/gmaps/gmaps.js" type="text/javascript"></script>
  <!--end::Page Vendors -->

  <!--begin::Custom Page -->
  <!--end::Custom Page -->

  <!--begin::Page Scripts(used by this page) -->

  <!-- Custom Functions -->
  <script src="/src/assets/js/sprintf.min.js" type="text/javascript"></script>
  <script src="/src/assets/js/custom/lang/tr/global.js" type="text/javascript"></script>
  <script src="/src/assets/js/custom/global.js" type="text/javascript"></script>
  <script src="/src/assets/js/custom/app.js" type="text/javascript"></script>

  <!-- Dashboard Page -->
  <script src="/src/assets/js/pages/dashboard.js" type="text/javascript"></script>

  <!-- Login Page -->
  <script src="/src/assets/js/pages/custom/login/login-general.js" type="text/javascript"></script>

  <!--Build -->
  <script src="/dist/build.js" type="text/javascript"></script>
  <!--<script type="text/javascript">loadjscssfile("/dist/build.js", "js");</script>-->

  <!-- One Signal -->
  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-153396545-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-153396545-1');
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->


</body>
<!-- end::Body -->
</html>
